@*
    Copyright (C) 2021 Sascha Manns <Sascha.Manns@outlook.de>

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*@
@{
    ViewBag.Title = _localizer["viewbag-title"];
    ViewBag.PageName = _localizer["viewbag-pagename"];
    ViewBag.PageBlurb = _localizer["viewbag-pageblurp"];
    ViewBag.PageImage = "/img/headers/code2.jpg";
    //BlazorContactForm
}
@using System.Net.Http
@using Newtonsoft.Json.Linq
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.JSInterop
@using Microsoft.AspNetCore.Mvc.Localization
@using MannsBlog.Models
@using MannsBlog.Views.Components;

@inject IConfiguration _config
@inject IViewLocalizer _localizer

@model ContactFormModel
@section styles {
    <link src="/css/contact.css" type="text/css"/>
}
<script src="https://www.google.com/recaptcha/api.js?render=@_config["Google:CaptchaSiteId"]"></script>
<component type="typeof(MannsBlog.Views.Components.ContactComponent)" render-mode="ServerPrerendered"/>

@section Scripts{
    <script src="~/_framework/blazor.server.js"></script>
    <script>
        runCaptcha = function (actionName) {
            return new Promise((resolve, reject) => {
                grecaptcha.ready(function () {
                    grecaptcha.execute(_config["Google:CaptchaSiteId"], { action: 'submit' }).then(function (token) {
                        resolve(token);
                    });
                });
            });
        };
    </script>
}